<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Stats (irmin-layers.Irmin_layers__.Stats)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">irmin-layers</a> &#x00BB; <a href="../index.html">Irmin_layers__</a> &#x00BB; Stats</nav><h1>Module <code>Irmin_layers__.Stats</code></h1></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = </code><code>{</code><table class="record"><tr id="type-t.nb_freeze" class="anchored"><td class="def field"><a href="#type-t.nb_freeze" class="anchor"></a><code><span class="keyword">mutable</span> nb_freeze : int;</code></td></tr><tr id="type-t.copied_contents" class="anchored"><td class="def field"><a href="#type-t.copied_contents" class="anchor"></a><code><span class="keyword">mutable</span> copied_contents : <span>int list</span>;</code></td></tr><tr id="type-t.copied_nodes" class="anchored"><td class="def field"><a href="#type-t.copied_nodes" class="anchor"></a><code><span class="keyword">mutable</span> copied_nodes : <span>int list</span>;</code></td></tr><tr id="type-t.copied_commits" class="anchored"><td class="def field"><a href="#type-t.copied_commits" class="anchor"></a><code><span class="keyword">mutable</span> copied_commits : <span>int list</span>;</code></td></tr><tr id="type-t.copied_branches" class="anchored"><td class="def field"><a href="#type-t.copied_branches" class="anchor"></a><code><span class="keyword">mutable</span> copied_branches : <span>int list</span>;</code></td></tr><tr id="type-t.waiting_freeze" class="anchored"><td class="def field"><a href="#type-t.waiting_freeze" class="anchor"></a><code><span class="keyword">mutable</span> waiting_freeze : <span>float list</span>;</code></td></tr><tr id="type-t.completed_freeze" class="anchored"><td class="def field"><a href="#type-t.completed_freeze" class="anchor"></a><code><span class="keyword">mutable</span> completed_freeze : <span>float list</span>;</code></td></tr><tr id="type-t.skips" class="anchored"><td class="def field"><a href="#type-t.skips" class="anchor"></a><code><span class="keyword">mutable</span> skips : int;</code></td></tr></table><code>}</code></dt><dd><p>The type for stats for a store S.</p><ul><li><code>nb_freeze</code> is the number of calls to <code>S.freeze</code>;</li><li><code>copied_contents</code> is the number of contents copied per freeze;</li><li><code>copied_nodes</code> is the number of nodes copied per freeze;</li><li><code>copied_commits</code> is the number of commits copied per freeze;</li><li><code>copied_branches</code> is the number of branches copied per freeze;</li><li><code>waiting_freeze</code> are the times the freeze threads waited to start, for the last 10 freezes at most;</li><li><code>completed_freeze</code> are the times the freeze threads took to complete, for the last 10 freezes at most;</li><li><code>skips</code> the number of skips during the graph traversals called by the freeze, where the same object can be skipped several times;</li></ul><p>Note that stats assume that there always is an ongoing freeze. If its not the case, you should discard the last 0.</p></dd></dl><dl><dt class="spec value" id="val-reset_stats"><a href="#val-reset_stats" class="anchor"></a><code><span class="keyword">val</span> reset_stats : unit <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val</span> get : unit <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-copy_contents"><a href="#val-copy_contents" class="anchor"></a><code><span class="keyword">val</span> copy_contents : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Increments t.copied_contents for the current freeze</p></dd></dl><dl><dt class="spec value" id="val-copy_nodes"><a href="#val-copy_nodes" class="anchor"></a><code><span class="keyword">val</span> copy_nodes : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Increments t.copied_nodes for the current freeze</p></dd></dl><dl><dt class="spec value" id="val-copy_commits"><a href="#val-copy_commits" class="anchor"></a><code><span class="keyword">val</span> copy_commits : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Increments t.copied_commits for the current freeze</p></dd></dl><dl><dt class="spec value" id="val-copy_branches"><a href="#val-copy_branches" class="anchor"></a><code><span class="keyword">val</span> copy_branches : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Increments t.copied_branches for the current freeze</p></dd></dl><dl><dt class="spec value" id="val-freeze"><a href="#val-freeze" class="anchor"></a><code><span class="keyword">val</span> freeze : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Signals the start of a new freeze, and increments t.nb_freeze</p></dd></dl><dl><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val</span> add : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Increment the number of objects added, do not call this for objects copied during a freeze.</p></dd></dl><dl><dt class="spec value" id="val-get_adds"><a href="#val-get_adds" class="anchor"></a><code><span class="keyword">val</span> get_adds : unit <span>&#45;&gt;</span> int</code></dt><dd><p>Get the number of objects added, not including the copied objects during a freeze.</p></dd></dl><dl><dt class="spec value" id="val-reset_adds"><a href="#val-reset_adds" class="anchor"></a><code><span class="keyword">val</span> reset_adds : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Reset the number of objects added.</p></dd></dl><dl><dt class="spec value" id="val-with_timer"><a href="#val-with_timer" class="anchor"></a><code><span class="keyword">val</span> with_timer : <span>[ `Freeze <span>| `Waiting</span> ]</span> <span>&#45;&gt;</span> <span>(unit <span>&#45;&gt;</span> <span>unit Lwt.t</span>)</span> <span>&#45;&gt;</span> <span>unit Lwt.t</span></code></dt><dd><p>Either the duration of a freeze thread waiting on the freeze lock to start; or the duration of a freeze thread to complete a freeze.</p></dd></dl><dl><dt class="spec value" id="val-skip"><a href="#val-skip" class="anchor"></a><code><span class="keyword">val</span> skip : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Increment the number of skips during a graph traversal.</p></dd></dl></div></body></html>