<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Irmin_layers__Stats (irmin-layers.Irmin_layers__Stats)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">irmin-layers</a> &#x00BB; Irmin_layers__Stats</nav><h1>Module <code>Irmin_layers__Stats</code></h1><h3 id="profiling-of-freeze"><a href="#profiling-of-freeze" class="anchor"></a>Profiling of Freeze</h3><h4 id="control-flow-of-the-freeze-thread"><a href="#control-flow-of-the-freeze-thread" class="anchor"></a>Control Flow of the Freeze Thread</h4><p>Most of the functions here should be called from under a single mutex lock.</p><nav class="toc"><ul><li><a href="#incrementations-of-counters">Incrementations of Counters</a></li><li><a href="#observation">Observation</a></li><li><a href="#misc.">Misc.</a></li></ul></nav></header><dl><dt class="spec value" id="val-freeze_start"><a href="#val-freeze_start" class="anchor"></a><code><span class="keyword">val</span> freeze_start : Mtime.t <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p>Signals the start of a new freeze given the time at which the freeze process started and the name given to the initial code section.</p></dd></dl><dl><dt class="spec value" id="val-freeze_section"><a href="#val-freeze_section" class="anchor"></a><code><span class="keyword">val</span> freeze_section : string <span>&#45;&gt;</span> unit</code></dt><dd><p>Signals that the freeze is entering a specific section of the code.</p></dd></dl><dl><dt class="spec value" id="val-freeze_stop"><a href="#val-freeze_stop" class="anchor"></a><code><span class="keyword">val</span> freeze_stop : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Signals the end of an ongoing freeze freeze.</p></dd></dl><dl><dt class="spec value" id="val-freeze_yield"><a href="#val-freeze_yield" class="anchor"></a><code><span class="keyword">val</span> freeze_yield : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Signals that the freeze is cooperatively yielding to other threads.</p></dd></dl><dl><dt class="spec value" id="val-freeze_yield_end"><a href="#val-freeze_yield_end" class="anchor"></a><code><span class="keyword">val</span> freeze_yield_end : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Signals that the freeze is given back the control.</p></dd></dl><section><header><h4 id="incrementations-of-counters"><a href="#incrementations-of-counters" class="anchor"></a>Incrementations of Counters</h4></header><dl><dt class="spec value" id="val-copy_contents"><a href="#val-copy_contents" class="anchor"></a><code><span class="keyword">val</span> copy_contents : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Increments the number of copied contents for the current freeze.</p></dd></dl><dl><dt class="spec value" id="val-copy_nodes"><a href="#val-copy_nodes" class="anchor"></a><code><span class="keyword">val</span> copy_nodes : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Increments the number of copied nodes for the current freeze.</p></dd></dl><dl><dt class="spec value" id="val-copy_commits"><a href="#val-copy_commits" class="anchor"></a><code><span class="keyword">val</span> copy_commits : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Increments the number of copied commits for the current freeze.</p></dd></dl><dl><dt class="spec value" id="val-copy_branches"><a href="#val-copy_branches" class="anchor"></a><code><span class="keyword">val</span> copy_branches : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Increments the number of copied branches for the current freeze.</p></dd></dl><dl><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val</span> add : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Increment the number of objects added by main thread.</p></dd></dl><dl><dt class="spec value" id="val-skip_test"><a href="#val-skip_test" class="anchor"></a><code><span class="keyword">val</span> skip_test : bool <span>&#45;&gt;</span> unit</code></dt><dd><p>Increment the number time we wondered if an entry was present at the destination during a graph traversal for the current freeze.</p></dd></dl><dl><dt class="spec value" id="val-copy_newies_loop"><a href="#val-copy_newies_loop" class="anchor"></a><code><span class="keyword">val</span> copy_newies_loop : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Increment the number of iterations of newies copy.</p></dd></dl></section><section><header><h4 id="observation"><a href="#observation" class="anchor"></a>Observation</h4></header><dl><dt class="spec value" id="val-get_add_count"><a href="#val-get_add_count" class="anchor"></a><code><span class="keyword">val</span> get_add_count : unit <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-get_copied_commits_count"><a href="#val-get_copied_commits_count" class="anchor"></a><code><span class="keyword">val</span> get_copied_commits_count : unit <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-get_copied_branches_count"><a href="#val-get_copied_branches_count" class="anchor"></a><code><span class="keyword">val</span> get_copied_branches_count : unit <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-get_copied_contents_count"><a href="#val-get_copied_contents_count" class="anchor"></a><code><span class="keyword">val</span> get_copied_contents_count : unit <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-get_copied_nodes_count"><a href="#val-get_copied_nodes_count" class="anchor"></a><code><span class="keyword">val</span> get_copied_nodes_count : unit <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-get_freeze_count"><a href="#val-get_freeze_count" class="anchor"></a><code><span class="keyword">val</span> get_freeze_count : unit <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-pp_latest"><a href="#val-pp_latest" class="anchor"></a><code><span class="keyword">val</span> pp_latest : Stdlib.Format.formatter <span>&#45;&gt;</span> unit</code></dt></dl></section><section><header><h4 id="misc."><a href="#misc." class="anchor"></a>Misc.</h4></header><dl><dt class="spec value" id="val-reset_stats"><a href="#val-reset_stats" class="anchor"></a><code><span class="keyword">val</span> reset_stats : unit <span>&#45;&gt;</span> unit</code></dt></dl></section></div></body></html>