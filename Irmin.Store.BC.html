<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Irmin.Store.RW.html">
<link rel="Up" href="Irmin.Store.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Irmin" rel="Chapter" href="Irmin.html"><link title="Tags" rel="Section" href="#1_Tags">
<link title="Heads" rel="Section" href="#1_Heads">
<link title="Functions over stores" rel="Section" href="#1_Functionsoverstores">
<link title="Slices" rel="Section" href="#1_Slices">
<title>Irmin.Store.BC</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Irmin.Store.RW.html" title="Irmin.Store.RW">Previous</a>
&nbsp;<a class="up" href="Irmin.Store.html" title="Irmin.Store">Up</a>
&nbsp;</div>
<h1>Module type <a href="type_Irmin.Store.BC.html">Irmin.Store.BC</a></h1>

<pre><span class="keyword">module type</span> BC = <code class="code">sig</code> <a href="Irmin.Store.BC.html">..</a> <code class="code">end</code></pre><hr width="100%">
<br>
A branch-consistent store is a mutable store which supports
        fork/join operations.<br>

<pre><span class="keyword">include</span> <a href="Irmin.Store.RW.html">Irmin.Store.RW</a></pre>
<br>
<h1 id="1_Tags">Tags</h1><br>

<pre><span id="TYPEtag"><span class="keyword">type</span> <code class="type"></code>tag</span> </pre>
<div class="info ">
Type of branch tags.<br>
</div>


<pre><span id="VALof_tag"><span class="keyword">val</span> of_tag</span> : <code class="type"><a href="Irmin.Store.BC.html#TYPEtag">tag</a> -> t</code></pre><div class="info ">
Create a store handle. Similar to <code class="code">create</code>, but use any tag name
        instead of the <code class="code">master</code> tag.<br>
</div>

<pre><span id="VALtag"><span class="keyword">val</span> tag</span> : <code class="type">t -> <a href="Irmin.Store.BC.html#TYPEtag">tag</a> option</code></pre><div class="info ">
Return the branch of the given store handle.<br>
</div>

<pre><span id="VALtag_exn"><span class="keyword">val</span> tag_exn</span> : <code class="type">t -> <a href="Irmin.Store.BC.html#TYPEtag">tag</a></code></pre><div class="info ">
Same as <code class="code">tag</code> but raise <code class="code">Not_found</code> in case of a detached
        head.<br>
</div>

<pre><span id="VALupdate_tag"><span class="keyword">val</span> update_tag</span> : <code class="type">t -> origin -> <a href="Irmin.Store.BC.html#TYPEtag">tag</a> -> [ `Duplicated_tag | `Ok ] Lwt.t</code></pre><div class="info ">
Change the current tag name. Fail if a tag with the same name
        already exists. The head is unchanged.<br>
</div>

<pre><span id="VALupdate_tag_force"><span class="keyword">val</span> update_tag_force</span> : <code class="type">t -> origin -> <a href="Irmin.Store.BC.html#TYPEtag">tag</a> -> unit Lwt.t</code></pre><div class="info ">
Same as <code class="code">update_tag</code> but delete and update the tag if it already
        exists.<br>
</div>

<pre><span id="VALdetach"><span class="keyword">val</span> detach</span> : <code class="type">t -> origin -> unit Lwt.t</code></pre><div class="info ">
Detach the current branch (ie. it is not assiaciated to a tag
        anymore).<br>
</div>
<br>
<h1 id="1_Heads">Heads</h1><br>

<pre><span id="TYPEhead"><span class="keyword">type</span> <code class="type"></code>head</span> </pre>
<div class="info ">
Type for head values.<br>
</div>


<pre><span id="VALof_head"><span class="keyword">val</span> of_head</span> : <code class="type"><a href="Irmin.Store.BC.html#TYPEhead">head</a> -> t</code></pre><div class="info ">
Create a temporary detached branch, which will not persist in
        the database as it has no associated persistent tag name.<br>
</div>

<pre><span id="VALhead"><span class="keyword">val</span> head</span> : <code class="type">t -> origin -> <a href="Irmin.Store.BC.html#TYPEhead">head</a> option Lwt.t</code></pre><div class="info ">
Return the head commit. Might block if the branch is persistent
        as it needs to lookup some tag contents.<br>
</div>

<pre><span id="VALhead_exn"><span class="keyword">val</span> head_exn</span> : <code class="type">t -> origin -> <a href="Irmin.Store.BC.html#TYPEhead">head</a> Lwt.t</code></pre><div class="info ">
Same as <code class="code">read_head</code> but raise <code class="code">Not_found</code> if the commit does not
        exist.<br>
</div>

<pre><span id="VALheads"><span class="keyword">val</span> heads</span> : <code class="type">t -> origin -> <a href="Irmin.Store.BC.html#TYPEhead">head</a> list Lwt.t</code></pre><div class="info ">
The list of all the databse heads.<br>
</div>

<pre><span id="VALupdate_head"><span class="keyword">val</span> update_head</span> : <code class="type">t -> origin -> <a href="Irmin.Store.BC.html#TYPEhead">head</a> -> unit Lwt.t</code></pre><div class="info ">
Set the commit head.<br>
</div>

<pre><span id="VALmerge_head"><span class="keyword">val</span> merge_head</span> : <code class="type">t -> origin -> <a href="Irmin.Store.BC.html#TYPEhead">head</a> -> unit <a href="Irmin.Merge.html#TYPEresult">Irmin.Merge.result</a> Lwt.t</code></pre><div class="info ">
Merge a commit with the current branch.<br>
</div>

<pre><span id="VALwatch_head"><span class="keyword">val</span> watch_head</span> : <code class="type">t -> origin -> key -> (key * <a href="Irmin.Store.BC.html#TYPEhead">head</a>) Lwt_stream.t</code></pre><div class="info ">
Watch changes for given key and the one it has recursive access.
        Return the stream of heads of the modified keys.<br>
</div>
<br>
<h1 id="1_Functionsoverstores">Functions over stores</h1><br>

<pre><span id="VALclone"><span class="keyword">val</span> clone</span> : <code class="type">t -> origin -> <a href="Irmin.Store.BC.html#TYPEtag">tag</a> -> [ `Duplicated_tag | `Ok of t ] Lwt.t</code></pre><div class="info ">
Fork the store, using the given branch name. Return <code class="code">None</code> if
        the branch already exists.<br>
</div>

<pre><span id="VALclone_force"><span class="keyword">val</span> clone_force</span> : <code class="type">t -> origin -> <a href="Irmin.Store.BC.html#TYPEtag">tag</a> -> t Lwt.t</code></pre><div class="info ">
Same as <code class="code">clone</code> but delete and update the existing branch if a
        branch with the same name already exists.<br>
</div>

<pre><span id="VALswitch"><span class="keyword">val</span> switch</span> : <code class="type">t -> origin -> <a href="Irmin.Store.BC.html#TYPEtag">tag</a> -> unit Lwt.t</code></pre><div class="info ">
Switch the database contents the be same as the contents of the
        given branch name. The two branches are still independant.<br>
</div>

<pre><span id="VALmerge"><span class="keyword">val</span> merge</span> : <code class="type">t -> origin -> <a href="Irmin.Store.BC.html#TYPEtag">tag</a> -> unit <a href="Irmin.Merge.html#TYPEresult">Irmin.Merge.result</a> Lwt.t</code></pre><div class="info ">
<code class="code">merge db t</code> merges the branch <code class="code">t</code> into the current database
        branch. The two branches are still independant.<br>
</div>

<pre><span class="keyword">module</span> <a href="Irmin.Store.BC.T.html">T</a>: <code class="type">Tc.I0</code><code class="type">  with type t = t</code></pre><div class="info">
Base functions over values of type <code class="code">t</code>.
</div>
<br>
<h1 id="1_Slices">Slices</h1><br>

<pre><span id="TYPEslice"><span class="keyword">type</span> <code class="type"></code>slice</span> </pre>
<div class="info ">
Type for database slices.<br>
</div>


<pre><span class="keyword">module</span> <a href="Irmin.Store.BC.Slice.html">Slice</a>: <code class="type">Tc.I0</code><code class="type">  with type t = slice</code></pre><div class="info">
Base functions over slices.
</div>

<pre><span id="VALexport"><span class="keyword">val</span> export</span> : <code class="type">?full:bool -><br>       ?depth:int -><br>       ?min:<a href="Irmin.Store.BC.html#TYPEhead">head</a> list -><br>       ?max:<a href="Irmin.Store.BC.html#TYPEhead">head</a> list -> t -> origin -> <a href="Irmin.Store.BC.html#TYPEslice">slice</a> Lwt.t</code></pre><div class="info ">
<code class="code">export t origin ~depth ~min ~max</code> exports the database slice
        between <code class="code">min</code> and <code class="code">max</code>, using at most <code class="code">depth</code> history depth
        (starting from the max).
<p>

        If <code class="code">max</code> is not specified, use the current <code class="code">heads</code>. If <code class="code">min</code> is
        not specified, use an unbound past (but can be still limited by
        <code class="code">depth</code>).
<p>

        <code class="code">depth</code> is used to limit the depth of the commit history. <code class="code">None</code>
        here means no limitation.
<p>

        If <code class="code">full</code> is set (default is true) the full graph, including the
        commits, nodes and contents, is exported, otherwise it is the
        commit history graph only.<br>
</div>

<pre><span id="VALimport"><span class="keyword">val</span> import</span> : <code class="type">t -><br>       origin -><br>       <a href="Irmin.Store.BC.html#TYPEslice">slice</a> -><br>       [ `Duplicated_tags of <a href="Irmin.Store.BC.html#TYPEtag">tag</a> list | `Ok ] Lwt.t</code></pre><div class="info ">
Import a database slide. Do not modify existing tags.<br>
</div>

<pre><span id="VALimport_force"><span class="keyword">val</span> import_force</span> : <code class="type">t -> origin -> <a href="Irmin.Store.BC.html#TYPEslice">slice</a> -> unit Lwt.t</code></pre><div class="info ">
Same as <code class="code">import</code> but delete and update the tags they already
        exist in the database.<br>
</div>
</body></html>